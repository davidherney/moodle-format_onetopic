define("format_onetopic/tabstyles",["exports","jquery","core/modal_factory"],(function(_exports,_jquery,_modal_factory){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * @package   format_onetopic
   * @copyright 2023 David Herney Bernal - cirano
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_modal_factory=_interopRequireDefault(_modal_factory);var $tabstyles=null,$styleswindow=null,currenttype="default",globalstyles={},$inputtosave=null;_exports.init=()=>{if($tabstyles=(0,_jquery.default)("#onetopic-tabstyles"),$inputtosave=$tabstyles.find("textarea.savecontrol"),$styleswindow=(0,_jquery.default)("#onetopic-styleswindow"),""!==$inputtosave.val().trim()){try{null===(globalstyles=JSON.parse($inputtosave.val()))&&(globalstyles={})}catch(e){console.error(e),globalstyles={}}applyStyles()}var $colorpicker=$styleswindow.find(".colorpicker"),$setcolor=$colorpicker.find('[data-action="setcolor"]'),$colorpickerinput=$colorpicker.find("input");$styleswindow.find('[data-control="colorpicker"]').on("click",(function(){var $node=(0,_jquery.default)(this);$colorpicker.show(),$colorpickerinput.val($node.val()),$setcolor.data("target",$node)})).on("change",(function(){var $node=(0,_jquery.default)(this),color=$node.val().trim();$node.css("background-color",color)})),$setcolor.on("click",(function(e){e.preventDefault(),$colorpicker.hide(),$setcolor.data("target").val($colorpickerinput.val()).trigger("change")})),$colorpicker.find('[data-action="cancel"]').on("click",(function(){$colorpicker.hide()}));var title=$styleswindow.data("title");_modal_factory.default.create({title:title,body:""}).done((function(modal){var $modalBody=modal.getBody();$styleswindow.show(),$modalBody.append($styleswindow),$styleswindow.data("modal",modal)})),$styleswindow.find('[data-action="cancelstyles"]').on("click",(function(){$styleswindow.data("modal").hide()})),$styleswindow.find('[data-action="setstyles"]').on("click",(function(){var modal=$styleswindow.data("modal"),newstyles={};$styleswindow.find("[data-style]").each((function(){var $node=(0,_jquery.default)(this),key=$node.data("style"),value=$node.val();""!==value&&(newstyles[key]=value)})),globalstyles[currenttype]=newstyles,$inputtosave.val(JSON.stringify(globalstyles)),applyStyles(),modal.hide()}));["default","active","parent","highlighted","disabled","hover","childs","childindex"].forEach((type=>{(0,_jquery.default)("#onetopic-tabstyles #tabstyleset"+type).on("click",(function(e){e.preventDefault(),showStylesWindow(type)}))})),(0,_jquery.default)("#onetopic-tabstyles #tabstyleclear").on("click",(function(e){e.preventDefault(),globalstyles={},$inputtosave.val(""),applyStyles()}))};var showStylesWindow=function(type){if(currenttype=type,$styleswindow.find("[data-style]").each((function(){var $node=(0,_jquery.default)(this);$node.is('input[type="text"]')?($node.val(""),$node.trigger("change")):$node.is("select")&&$node.find("option").first().prop("selected",!0)})),void 0!==globalstyles[type]){var currentstyles=globalstyles[type];Object.entries(currentstyles).forEach((_ref=>{let[key,value]=_ref;$styleswindow.find('[data-style="'+key+'"]').val(value),$styleswindow.find('[data-control="colorpicker"]').trigger("change")}))}$styleswindow.data("modal").show()},applyStyles=function(){var withunits=["font-size","line-height","margin","padding","border-width","border-radius"],csscontent="";Object.entries(globalstyles).forEach((_ref2=>{let[type,styles]=_ref2;switch(type){case"active":csscontent+=".format-onetopic .verticaltabs .format_onetopic-tabs .nav-item a.nav-link.active, ",csscontent+=".format-onetopic .nav-tabs a.nav-link.active, ",csscontent+=".format-onetopic .onetopic-tab-body .nav-tabs a.nav-link.active, ",csscontent+=".format-onetopic .onetopic-tab-body .nav-tabs .nav-item.subtopic a.nav-link.active";break;case"parent":csscontent+=".format-onetopic .verticaltabs .format_onetopic-tabs .nav-item.haschilds a.nav-link, ",csscontent+=".format-onetopic .nav-tabs .nav-item.haschilds a.nav-link";break;case"highlighted":csscontent+=".format-onetopic .verticaltabs .format_onetopic-tabs .nav-item.marker a.nav-link, ",csscontent+=".format-onetopic .nav-tabs .nav-item.marker a.nav-link, ",csscontent+=".format-onetopic .onetopic-tab-body .nav-tabs .nav-item.marker a.nav-link, ",csscontent+=".format-onetopic .onetopic-tab-body .nav-tabs .nav-item.subtopic.marker a.nav-link";break;case"disabled":csscontent+=".format-onetopic .verticaltabs .format_onetopic-tabs .nav-item.disabled a.nav-link, ",csscontent+=".format-onetopic .nav-tabs .nav-item.disabled a.nav-link, ",csscontent+=".format-onetopic .onetopic-tab-body .nav-tabs .nav-item.disabled a.nav-link, ",csscontent+=".format-onetopic .onetopic-tab-body .nav-tabs .nav-item.subtopic.disabled a.nav-link";break;case"hover":csscontent+=".format-onetopic .verticaltabs .format_onetopic-tabs .nav-item a.nav-link:hover, ",csscontent+=".format-onetopic .nav-tabs .nav-item a.nav-link:hover, ",csscontent+=".format-onetopic .onetopic-tab-body .nav-tabs .nav-item a.nav-link:hover, ",csscontent+=".format-onetopic .onetopic-tab-body .nav-tabs .nav-item.subtopic a.nav-link:hover";break;case"childs":csscontent+=".format-onetopic .onetopic-tab-body .nav-tabs .nav-item.subtopic a.nav-link";break;case"childindex":csscontent+=".format-onetopic .onetopic-tab-body .nav-tabs .nav-item.subtopic.tab_initial a.nav-link";break;default:csscontent+=".format-onetopic .verticaltabs .format_onetopic-tabs .nav-item a.nav-link, ",csscontent+=".format-onetopic .nav-tabs a.nav-link"}csscontent+="{";var units=[],stylesarray=Object.entries(styles);stylesarray.forEach((_ref3=>{let[key,value]=_ref3;0===key.indexOf("unit-")&&(key=key.replace("unit-",""),units[key]=value)})),stylesarray.forEach((_ref4=>{let[key,value]=_ref4;0!==key.indexOf("unit-")&&(void 0!==units[key]?value+=units[key]:-1!==withunits.indexOf(key)&&(value+="px"),csscontent+="others"==key?value+";":key+":"+value+";")})),csscontent+="}"}));var $stylecontainer=$tabstyles.find("style");$stylecontainer.length>0&&$stylecontainer.remove(),$stylecontainer=(0,_jquery.default)('<style type="text/css">'+csscontent+"</style>"),$tabstyles.append($stylecontainer)}}));

//# sourceMappingURL=tabstyles.min.js.map